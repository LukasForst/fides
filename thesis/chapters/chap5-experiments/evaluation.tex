
\section{Experiments Evaluation}
\label{sec:experiments-evaluation}

Each experiment is evaluated with a single value $x$.
The evaluation function (\ref{eq:simulation_evaluation_function}) weights the performance of detecting correct target score with the detection of peer behaviors.
\begin{equation}
\begin{split}
    x = w \cdot \frac{1}{|\tau|} \sum_{T \in \tau}\left|S_{T} - S^{k_{max}}_{T} \right| + \left(1 - w\right) \cdot \frac{1}{|P|} \sum_{j \in P}\left|\bar{b_{j}} - st^{k_{max}}_{i, j} \right|
\end{split}
\label{eq:simulation_evaluation_function}
\end{equation}.

In the first part, we measure average target detection, or how close was score produced by the trust model to the ground truth.
We use following notation - $\tau$ is the set of targets in the simulation, $S_{T}$ is the ground truth score of the target, $S^{k_{max}}_{T}$ is then score for given target computed by Fides at the end of the simulation.

The second half is the evaluation that defines how close was trust model's service trust value for the remote peer to the peer's real behavior in the simulation.
The notation is - $P$ is set of remote peers in the simulation, $st^{k_{max}}_{i, j}$ is the service trust that the local trust model (\textit{j}) had for the remote peer (\textit{j}) at then end of the simulation.
$\bar{b_{j}}$ is the ground truth behavior of the remote peer. 
More specifically, recall description of the peers behaviors from section \ref{sec:peers-behavioral-patterns}, where each peer's behavior $b$ had $\mu^{b}_{s}$ that was used during threat intelligence sampling.
Because sampled score is $<-1; 1>$ and service trust $<0; 1>$, we can not use the $\mu^{b}_{s}$ directly, but we need to scale it to correct interval.
Moreover, as malicious (\ref{subsubsec:malicious-peer}) and incorrect peers (\ref{subsubsec:confident-incorrect-peer}) do have $\mu^{b}_{s}$ on the opposite scale that the ground truth is, we need to shift it before normalizing it.
For that reason, $shift = -1$ for malicious (\ref{subsubsec:malicious-peer}) and incorrect peers (\ref{subsubsec:confident-incorrect-peer}) and $shift = 1$ for confident correct (\ref{subsubsec:confident-correct-peer}) and uncertain (\ref{subsubsec:uncertain-peer}) behaviors.

\begin{equation}
    \begin{split}
    \bar{b_{j}} &= \frac{1}{2} \cdot \left(1 + shift \cdot \mu^{b}_{s} \right)
    \end{split}
\end{equation}
